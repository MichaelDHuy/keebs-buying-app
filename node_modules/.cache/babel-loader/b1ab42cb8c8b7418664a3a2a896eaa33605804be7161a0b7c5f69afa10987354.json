{"ast":null,"code":"var _jsxFileName = \"/Users/anhdaden/lighthouse/Udemy/React-Maxi/01-starting-project/src/App.js\",\n  _s = $RefreshSig$();\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Fragment, useEffect } from 'react';\nimport Cart from './components/Cart/Cart';\nimport Layout from './components/Layout/Layout';\nimport Products from './components/Shop/Products';\n// import { uiActions } from './store/ui-slice';\nimport Notification from './components/UI/Notification';\nimport { sendCartData, fetchCartData } from './store/cart-data';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet initialNoti = true;\nfunction App() {\n  _s();\n  const dispatch = useDispatch();\n  const showCart = useSelector(state => state.ui.cartIsVisible);\n  const cart = useSelector(state => state.cart);\n  const notification = useSelector(state => state.ui.notification);\n  useEffect(() => {\n    dispatch(fetchCartData());\n  }, [dispatch]);\n  useEffect(() => {\n    // const sendCartData = async () => {\n    // dispatch(uiActions.showNotification({\n    //   status: 'pending',\n    //   title: 'Sending...',\n    //   message: 'Sending cart data!'\n    // }));\n\n    // const response = await fetch('https://react-maxi-project-04-default-rtdb.firebaseio.com/keebsCart.json', { \n    // method: 'PUT',\n    // body: JSON.stringify(cart),\n    // });\n\n    // if (!response.ok) {\n    //   throw new Error('Sending cart data failed!');\n    // }\n\n    // dispatch(uiActions.showNotification({\n    //   status: 'success',\n    //   title: 'Success!',\n    //   message: 'Sending cart data successfully!'\n    // }));\n    // };\n\n    if (initialNoti) {\n      initialNoti = false;\n      return;\n    }\n\n    // sendCartData().catch(error => {\n    //   dispatch(uiActions.showNotification({\n    //     status: 'error',\n    //     title: 'Error!',\n    //     message: 'Sending cart data failed!'\n    //   }));\n    // });\n\n    dispatch(sendCartData(cart));\n  }, [cart, dispatch]);\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [notification && /*#__PURE__*/_jsxDEV(Notification, {\n      status: notification.status,\n      title: notification.title,\n      message: notification.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Layout, {\n      children: [showCart && /*#__PURE__*/_jsxDEV(Cart, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 22\n      }, this), /*#__PURE__*/_jsxDEV(Products, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"+0lLiRKB8WOzaKnbCMqO0rhbWxM=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useSelector","useDispatch","Fragment","useEffect","Cart","Layout","Products","Notification","sendCartData","fetchCartData","jsxDEV","_jsxDEV","initialNoti","App","_s","dispatch","showCart","state","ui","cartIsVisible","cart","notification","children","status","title","message","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/anhdaden/lighthouse/Udemy/React-Maxi/01-starting-project/src/App.js"],"sourcesContent":["import { useSelector, useDispatch } from 'react-redux';\nimport { Fragment, useEffect } from 'react';\n\nimport Cart from './components/Cart/Cart';\nimport Layout from './components/Layout/Layout';\nimport Products from './components/Shop/Products';\n// import { uiActions } from './store/ui-slice';\nimport Notification from './components/UI/Notification';\nimport { sendCartData, fetchCartData } from './store/cart-data';\n\n\nlet initialNoti = true;\nfunction App() {\n\n  const dispatch = useDispatch();\n  const showCart = useSelector(state => state.ui.cartIsVisible);\n\n  const cart  = useSelector(state => state.cart);\n  const notification = useSelector(state => state.ui.notification);\n\n  useEffect(() => {\n    dispatch(fetchCartData());\n  }, [dispatch]);\n\n  useEffect(() => {\n    // const sendCartData = async () => {\n      // dispatch(uiActions.showNotification({\n      //   status: 'pending',\n      //   title: 'Sending...',\n      //   message: 'Sending cart data!'\n      // }));\n      \n      // const response = await fetch('https://react-maxi-project-04-default-rtdb.firebaseio.com/keebsCart.json', { \n      // method: 'PUT',\n      // body: JSON.stringify(cart),\n      // });\n\n      // if (!response.ok) {\n      //   throw new Error('Sending cart data failed!');\n      // }\n\n      // dispatch(uiActions.showNotification({\n      //   status: 'success',\n      //   title: 'Success!',\n      //   message: 'Sending cart data successfully!'\n      // }));\n    // };\n\n    if (initialNoti) {\n      initialNoti = false;\n      return;\n    }\n    \n    // sendCartData().catch(error => {\n    //   dispatch(uiActions.showNotification({\n    //     status: 'error',\n    //     title: 'Error!',\n    //     message: 'Sending cart data failed!'\n    //   }));\n    // });\n\n    dispatch(sendCartData(cart));\n  }, [cart, dispatch]);\n\n  return (\n    <Fragment>\n      {notification && \n        <Notification \n          status={notification.status} \n          title={notification.title}  \n          message={notification.message} \n        />\n      }\n      <Layout>\n        {showCart && <Cart />}\n        <Products />\n      </Layout>\n    </Fragment>\n  );\n}\n\nexport default App;\n"],"mappings":";;AAAA,SAASA,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,SAASC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAE3C,OAAOC,IAAI,MAAM,wBAAwB;AACzC,OAAOC,MAAM,MAAM,4BAA4B;AAC/C,OAAOC,QAAQ,MAAM,4BAA4B;AACjD;AACA,OAAOC,YAAY,MAAM,8BAA8B;AACvD,SAASC,YAAY,EAAEC,aAAa,QAAQ,mBAAmB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAGhE,IAAIC,WAAW,GAAG,IAAI;AACtB,SAASC,GAAGA,CAAA,EAAG;EAAAC,EAAA;EAEb,MAAMC,QAAQ,GAAGd,WAAW,EAAE;EAC9B,MAAMe,QAAQ,GAAGhB,WAAW,CAACiB,KAAK,IAAIA,KAAK,CAACC,EAAE,CAACC,aAAa,CAAC;EAE7D,MAAMC,IAAI,GAAIpB,WAAW,CAACiB,KAAK,IAAIA,KAAK,CAACG,IAAI,CAAC;EAC9C,MAAMC,YAAY,GAAGrB,WAAW,CAACiB,KAAK,IAAIA,KAAK,CAACC,EAAE,CAACG,YAAY,CAAC;EAEhElB,SAAS,CAAC,MAAM;IACdY,QAAQ,CAACN,aAAa,EAAE,CAAC;EAC3B,CAAC,EAAE,CAACM,QAAQ,CAAC,CAAC;EAEdZ,SAAS,CAAC,MAAM;IACd;IACE;IACA;IACA;IACA;IACA;;IAEA;IACA;IACA;IACA;;IAEA;IACA;IACA;;IAEA;IACA;IACA;IACA;IACA;IACF;;IAEA,IAAIS,WAAW,EAAE;MACfA,WAAW,GAAG,KAAK;MACnB;IACF;;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEAG,QAAQ,CAACP,YAAY,CAACY,IAAI,CAAC,CAAC;EAC9B,CAAC,EAAE,CAACA,IAAI,EAAEL,QAAQ,CAAC,CAAC;EAEpB,oBACEJ,OAAA,CAACT,QAAQ;IAAAoB,QAAA,GACND,YAAY,iBACXV,OAAA,CAACJ,YAAY;MACXgB,MAAM,EAAEF,YAAY,CAACE,MAAO;MAC5BC,KAAK,EAAEH,YAAY,CAACG,KAAM;MAC1BC,OAAO,EAAEJ,YAAY,CAACI;IAAQ;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAC9B,eAEJlB,OAAA,CAACN,MAAM;MAAAiB,QAAA,GACJN,QAAQ,iBAAIL,OAAA,CAACP,IAAI;QAAAsB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAAG,eACrBlB,OAAA,CAACL,QAAQ;QAAAoB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAAG;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QACL;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QACA;AAEf;AAACf,EAAA,CAnEQD,GAAG;EAAA,QAEOZ,WAAW,EACXD,WAAW,EAEdA,WAAW,EACJA,WAAW;AAAA;AAAA8B,EAAA,GANzBjB,GAAG;AAqEZ,eAAeA,GAAG;AAAC,IAAAiB,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}